 	ORG	0000H
	GOTO	MAIN		
	ORG	0008H	 	
				
	GOTO CHK_HI_PRIO
	ORG	00018		
	BTFSC PIR1,TMR1IF	
	BRA 	T1_ISR	
	BTFSC PIR1,TXIF	
	BRA	TX_ISR	
	RETFIE		
CHK_HI_PRIO	ORG	0x50
	BTFSC INTCON,TMR0IF	
	BRA	T0_ISR	
	BTFSC PIR1,RCIF	
	BRA RC_ISR		
	RETFIE 0x01	
	ORG	0100H	 	
MAIN	BCF	TRISC,RC0
	BCF	TRISC,RC1
	CLRF TRISB		
	SETF TRISD		
	MOVLW 0x08		
				
	MOVWF T0CON	
	MOVLW	 0xFF		
	MOVWF	 TMR0H	
	MOVLW	0x00		
	MOVWF TMR0L	
	BCF INTCON,TMR0IF 
	MOVLW 0x0		
				
	MOVWF T1CON	
	MOVLW	 0xFF		
	MOVWF	 TMR1H	
	MOVLW	0x00		
	MOVWF TMR1L	
	BCF PIR1,TMR1IF 
	MOVLW 0x20		
	MOVWF TXSTA	
   	MOVLW D'15'    	
   	MOVWF SPBRG   	
   	MOVLW 0x90		
   	MOVWF	RCSTA     	
	BCF TRISC, TX   
	BSF TRISC, RX	
	BSF	RCON,IPEN
	BSF	PIE1,RCIE
	BSF PIE1,TXIE	
	BSF INTCON,TMR0IE	
	BSF PIE1,TMR1IE 	
	BCF IPR1,TMR1IP 
	BCF IPR1,TXIP 
	BSF T0CON,TMR0ON		
	BSF T1CON,TMR1ON		
	BSF INTCON,GIEL		
	BSF INTCON,GIEH		
OVER BRA	 OVER			
T0_ISR	ORG 200H
	MOVLW	 0xFF		
	MOVWF	 TMR0H	
	MOVLW	0x00		
	MOVWF TMR0L	
	BTG	PORTC,0	
	BCF INTCON,TMR0IF 
	RETFIE 0x01
T1_ISR	ORG 300H
	MOVLW	 0xFF		
	MOVWF	 TMR1H	
	MOVLW	0x00		
	MOVWF TMR1L	
	BTG PORTC,1
	BCF PIR1,TMR1IF 
	RETFIE
TX_ISR
	BCF PIR1,TXIF 
	MOVFF PORTD,TXREG
	RETFIE
RC_ISR
	MOVFF RCREG,PORTB  
	BCF	PIR1, RCIF     	
	RETFIE 1	
	END
